<!DOCTYPE html>
<html>
<head>
    <title>Secure Payment Portal</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="bg-light">
    <div class="container mt-5">
        <div class="card shadow p-4 mx-auto" style="max-width: 500px;">
            <h2 class="text-center mb-4">ðŸ’³ Secure Checkout</h2>
            <div id="result" class="alert d-none"></div>
            
            <input type="text" id="user_id" class="form-control mb-3" placeholder="Enter User ID">
            <input type="text" id="card_num" class="form-control mb-3" placeholder="Card Number (Masked)">
            <input type="number" id="amount" class="form-control mb-3" placeholder="Amount ($)">
            <select id="state" class="form-control mb-3">
                <option value="NY">New York</option>
                <option value="CA">California</option>
                <option value="TX">Texas</option>
            </select>
            <button onclick="pay()" class="btn btn-primary w-100">Pay Now</button>
        </div>
    </div>

    <script>
        async function pay() {
            const data = {
                user_id: document.getElementById('user_id').value,
                card_num: document.getElementById('card_num').value,
                amount: document.getElementById('amount').value,
                state: document.getElementById('state').value
            };

            const response = await fetch('/process_payment', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(data)
            });
            
            const res = await response.json();
            const alert = document.getElementById('result');
            alert.className = `alert d-block ${res.status === 'Approved' ? 'alert-success' : 'alert-danger'}`;
            alert.innerText = `Result: ${res.status} (${res.user_type} User)`;
        }
    </script>
</body>
</html>